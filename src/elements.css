/**
 * effective-css-reset – Elements Layer
 * @layer elements
 *
 * Goal: Minimal, semantically sensible HTML element defaults; no compound UI components.
 * ELT-001 to ELT-031
 *
 * ELT-003: This file is fully optional. Integrators can choose not to import it.
 */

@layer elements {
  /**
   * ELT-020, ELT-022, ELT-024: Define system font stacks including emoji fonts.
   *
   * --font-system-ui-sans: Modern system UI font stack with full emoji support.
   * --font-system-ui-mono: Modern monospace font stack for code elements.
   *
   * Aligned with:
   * - CSS-Tricks (Chris Coyier) – System Font Stack article
   * - Tailwind Preflight – system-ui based font stack
   * - GitHub – uses similar system font stack
   * - Bootstrap 5 – native font stack
   * - Andy Bell (Piccalilli) – system-ui, sans-serif
   */
  :root {
    --font-system-ui-sans:
      system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial,
      sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";

    --font-system-ui-mono:
      ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New",
      monospace;
  }

  /**
   * ELT-021: Apply system font stack to body.
   *
   * Additional sensible defaults:
   * - line-height: 1.5 improves readability for body text
   * - min-height: 100dvh prevents "short body" issues, enables sticky footers
   * - overflow-wrap: break-word prevents horizontal overflow from long words/URLs
   *
   * Aligned with:
   * - line-height: Josh Comeau (1.5), Andy Bell (1.5), Tailwind (1.5)
   * - min-height: Josh Comeau (100%), Andy Bell (100%), Modern best practice (100dvh)
   * - overflow-wrap: Josh Comeau (break-word on specific elements)
   */
  body {
    font-family: var(--font-system-ui-sans);
    line-height: 1.5;
    min-height: 100dvh;
    overflow-wrap: break-word;
  }

  /**
   * ELT-023: Apply monospace font stack to code elements.
   *
   * Aligned with:
   * - Tailwind Preflight – code, kbd, samp, pre { font-family: monospace stack }
   * - Normalize.css – code, kbd, samp { font-family: monospace }
   */
  code,
  pre,
  kbd,
  samp {
    font-family: var(--font-system-ui-mono);
  }

  /**
   * ELT-010: Minor link improvements while keeping them recognizable.
   * text-decoration-skip-ink improves readability of underlines
   * by avoiding crossing descenders (g, j, p, q, y).
   *
   * Aligned with:
   * - Andy Bell (Piccalilli) – a { text-decoration-skip-ink: auto }
   * - Modern browser default (but explicit is better)
   */
  a {
    text-decoration-skip-ink: auto;
  }

  /**
   * ELT-025: Balanced text wrapping for headings.
   *
   * text-wrap: balance distributes words more evenly across lines,
   * avoiding awkward single-word "orphans" on the last line.
   * This significantly improves the visual appearance of headlines.
   *
   * Note: Browser support is excellent (Chrome 114+, Safari 17.5+, Firefox 121+).
   * Browsers without support will gracefully ignore this property.
   *
   * References:
   * - https://developer.mozilla.org/en-US/docs/Web/CSS/text-wrap
   * - https://developer.chrome.com/blog/css-text-wrap-balance
   *
   * Aligned with:
   * - Josh Comeau – h1-h6 { text-wrap: balance }
   * - Andy Bell (Piccalilli) – h1-h6 { text-wrap: balance }
   */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    text-wrap: balance;
  }

  /**
   * ELT-026: Prettier text wrapping for paragraphs.
   *
   * text-wrap: pretty attempts to prevent orphans (single words on the last line)
   * by adjusting line breaks throughout the paragraph. Less aggressive than
   * balance, making it suitable for body text.
   *
   * Note: Newer property with growing support (Chrome 117+, Safari 17.5+).
   * Browsers without support will gracefully ignore this property.
   *
   * References:
   * - https://developer.mozilla.org/en-US/docs/Web/CSS/text-wrap
   * - https://developer.chrome.com/blog/css-text-wrap-pretty
   *
   * Aligned with:
   * - Josh Comeau – p { text-wrap: pretty }
   */
  p {
    text-wrap: pretty;
  }

  /**
   * ELT-040: Create a stacking context for common React/Next.js root elements.
   *
   * isolation: isolate creates a new stacking context without any other side effects.
   * This prevents z-index values inside the app from interacting with z-index values
   * outside (e.g., browser extensions, third-party widgets, portaled modals).
   *
   * Common root element IDs:
   * - #root: Create React App, Vite React template
   * - #__next: Next.js
   * - #app: Vue CLI default
   *
   * References:
   * - https://developer.mozilla.org/en-US/docs/Web/CSS/isolation
   * - https://www.joshwcomeau.com/css/stacking-contexts/
   *
   * Aligned with:
   * - Josh Comeau – #root, #__next { isolation: isolate }
   */
  #root,
  #__next,
  #app {
    isolation: isolate;
  }

  /**
   * ELT-050: Improved scroll behavior for anchor links.
   *
   * When navigating to an element via anchor link (e.g., #section), the browser
   * scrolls to put that element at the top of the viewport. This can cause the
   * element to be hidden behind fixed headers or feel cramped.
   *
   * scroll-margin-block adds breathing room above targeted elements.
   * 5ex ≈ 5 line heights, providing comfortable spacing.
   *
   * References:
   * - https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-margin
   * - https://css-tricks.com/fixed-headers-and-jump-links-the-solution-is-scroll-margin-top/
   *
   * Aligned with:
   * - Andy Bell (Piccalilli) – :target { scroll-margin-block: 5ex }
   */
  :target {
    scroll-margin-block: 5ex;
  }

  /**
   * ELT-060: Enable animations to/from intrinsic sizes like `height: auto`.
   *
   * By default, CSS cannot animate between a fixed size and `auto` (or other
   * intrinsic keywords like `min-content`, `max-content`, `fit-content`).
   * `interpolate-size: allow-keywords` enables this, making accordion-style
   * animations and expand/collapse effects much easier to implement.
   *
   * Note: Only enabled when user has no motion preference, as this property
   * specifically enables animations.
   *
   * Browser support (Dec 2025): Chrome/Edge 129+. Firefox/Safari not yet.
   * Progressive enhancement: browsers without support simply ignore it.
   *
   * References:
   * - https://developer.mozilla.org/en-US/docs/Web/CSS/interpolate-size
   * - https://developer.chrome.com/docs/css-ui/animate-to-height-auto
   *
   * Aligned with:
   * - Josh Comeau (2025 update) – html { interpolate-size: allow-keywords }
   */
  @media (prefers-reduced-motion: no-preference) {
    :root {
      interpolate-size: allow-keywords;
    }
  }

  /**
   * ELT-011: h1–h6 and p do NOT receive additional margins.
   * Only the global 0-margins from reset apply.
   * Spacing systems are out of scope for v1.
   *
   * ELT-012: ul, ol, dl keep their list-style defaults.
   * Margin/padding are already 0 from reset.
   *
   * ELT-030, ELT-031: No fluid typography, scales, or clamp()-based
   * font sizing in v1. Only default UA behavior + base font family.
   *
   * Intentionally NOT included (contrary to some resets):
   * - Elad Shechter removes list-style completely
   * - Some resets add heading margins back
   */
}
